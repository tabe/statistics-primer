\begin{scope}[every node/.style={draw,rectangle}]
\node (Omega) at (0,0) {{\Huge $\Omega$}};
\node (Realization) at (3,0) {{\Huge $\Realization$}};
\node (Psi) at (0,-7) {{\Huge $\Psi$}};
\node (Sample) at (3,-7) {{\Huge $\mathcal{S}$}};
\node (Action) at (6,-7) {{\Huge $\Action$}};
\node (Loss) at (9,-7) {{\Huge $\Reals$}};
\node (D) at (4.5,-5.6) {{\Large $D$}};
\node (Theta) at (1.5,3.5) {{\Huge $\Theta$}};
\end{scope}

\node (psi in Psi) at (0,-7.9) {\rotatebox[origin=c]{90}{$\in$}};
\node (theta in Theta) at (1.5,2.7) {\rotatebox[origin=c]{90}{$\in$}};
\node (omega in Omega) at (0,-0.9) {\rotatebox[origin=c]{90}{$\in$}};
\node (realization in Realization) at (3,-0.9) {\rotatebox[origin=c]{90}{$\in$}};
\node (s in Sample) at (3,-7.9) {\rotatebox[origin=c]{90}{$\in$}};
\node (a in Action) at (6,-7.9) {\rotatebox[origin=c]{90}{$\in$}};
\node (loss in Loss) at (9,-7.9) {\rotatebox[origin=c]{90}{$\in$}};
\node (d in D) at (4.5,-6.2) {\rotatebox[origin=c]{90}{$\in$}};

\begin{scope}[every node/.style={}]
\node (psi) at (0,-8.5) {$\psi$};
\node (omega1) at (0,-1.5) {$\omega_1$};
\node (omega2) at (0,-2.5) {$\omega_2$};
\node (omega3) at (0,-3.5) {$\omega_3$};
\node (omega_) at (0,-4.5) {$\vdots$};
\node (omegaN) at (0,-5.5) {$\omega_{\textcolor{green}{n}}$};
\node (inbetween) at (1.5,-4.5) {$\vdots$};
\node (realization1) at (3,-1.5) {$x_1$};
\node (realization2) at (3,-2.5) {$x_2$};
\node (realization3) at (3,-3.5) {$x_3$};
\node (realization_) at (3,-4.5) {$\vdots$};
\node (realizationN) at (3,-5.5) {$x_{\textcolor{green}{n}}$};
\node (s) at (3,-8.5) {$s$};
\node (action) at (6,-8.5) {$a$};
\node (loss) at (9,-8.5) {$L(\textcolor{orange}{\theta}, a)$};
\end{scope}

\begin{scope}[every node/.style={draw,rounded corners,dashed}]
\node[fit=(omega1) (omega2) (omega3) (omegaN)] (omegas) {};
\node[fit=(realization1) (realization2) (realization3) (realizationN)] (realizations) {};
\draw[dashed] (omegas) to[out=-60,in=60] (psi);
\draw[dashed] (realizations) to[out=-60,in=60] (s);
\end{scope}


\draw[-Latex] (Omega) -- node[above] (X) {{\Large $X_{\textcolor{orange}{\theta}}$}} (Realization);
\path (Omega) -- node[below] {確率変数} (Realization);
\draw[-Latex] (Sample) -- node[above] (d) {{\Large $d$}}  (Action);
\draw[-Latex] (Psi) -- node[above] (S) {{\Large $S_{\textcolor{orange}{\theta}, \textcolor{green}{n}}$}} (Sample);
\draw[-Latex] (Psi) -- node[below] {標本} (Sample);
\path (Sample) -- node[below] {決定規則} (Action);
\draw[-Latex] (Action) -- node[above] (L) {{\Large $L(\textcolor{orange}{\theta}, \cdot)$}} (Loss);
\path (Action) -- node[below] {損失} (Loss);
\draw[|->] (psi) -- (s);
\draw[|->] (omega1) -- (realization1);
\draw[|->] (omega2) -- (realization2);
\draw[|->] (omega3) -- (realization3);
\draw[|->] (omegaN) -- (realizationN);
\draw[|->] (s) -- (action);
\draw[|->] (action) -- (loss);

\node (theta) at (1.5,2) {$\textcolor{orange}{\theta}$};
% \node (n) at (0,-1.25) {$\textcolor{green}{n}$};

\begin{scope}[every path/.style={dashed,orange}]
\draw (theta) -- (X);
\draw (theta) -| (L);
\end{scope}

% \begin{scope}[every path/.style={dashed,green}]
% \draw (n) -| (Psi);
% \draw (n) -| (Sample);
% \end{scope}

\draw[decorate,decoration={brace,amplitude=10pt},xshift=10pt,yshift=0pt] (3,-1.2) -- (3,-5.8) node [black,midway,xshift=5em] {独立同分布(i.i.d.)};
